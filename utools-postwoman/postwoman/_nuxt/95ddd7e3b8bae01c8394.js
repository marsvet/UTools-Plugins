(window.webpackJsonp=window.webpackJsonp||[]).push([[67],{943:function(e,t,o){"use strict";o.r(t);o(27),o(16),o(26),o(25),o(22),o(23),o(99),o(10),o(48),o(24),o(37),o(15),o(7),o(29);var n=o(6),r=o(238);function l(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);"Object"===o&&e.constructor&&(o=e.constructor.name);if("Map"===o||"Set"===o)return Array.from(o);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return c(e,t)}(e))){var i=0,t=function(){};return{s:t,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,n,r=!0,l=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){l=!0,n=e},f:function(){try{r||null==o.return||o.return()}finally{if(l)throw n}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,o=new Array(t);i<t;i++)o[i]=e[i];return o}var d={data:function(){return{fb:r.a}},props:{show:Boolean},components:{modal:function(){return o.e(0).then(o.bind(null,948))}},computed:{collectionJson:function(){return JSON.stringify(this.$store.state.postwoman.collections,null,2)}},methods:{hideModal:function(){this.$emit("hide-modal")},openDialogChooseFileToReplaceWith:function(){this.$refs.inputChooseFileToReplaceWith.click()},openDialogChooseFileToImportFrom:function(){this.$refs.inputChooseFileToImportFrom.click()},replaceWithJSON:function(){var e=this,t=new FileReader;t.onload=function(t){var content=t.target.result,o=JSON.parse(content);if(o[0]){var r=Object.keys(o[0]),l=Object(n.a)(r,3);l[0],l[1],l[2]}else{if(!o.info||!o.info.schema.includes("v2.1.0"))return e.failedImport();o=e.parsePostmanCollection(o)}e.$store.commit("postwoman/replaceCollections",o),e.fileImported(),e.syncToFBCollections()},t.readAsText(this.$refs.inputChooseFileToReplaceWith.files[0])},importFromJSON:function(){var e=this,t=new FileReader;t.onload=function(t){var content=t.target.result,o=JSON.parse(content);if(o[0]){var r=Object.keys(o[0]),l=Object(n.a)(r,3);l[0],l[1],l[2]}else{if(!o.info||!o.info.schema.includes("v2.1.0"))return e.failedImport();o=e.parsePostmanCollection(o)}e.$store.commit("postwoman/importCollections",o),e.fileImported(),e.syncToFBCollections()},t.readAsText(this.$refs.inputChooseFileToImportFrom.files[0])},exportJSON:function(){var text=this.collectionJson;text=text.replace(/\n/g,"\r\n");var e=new Blob([text],{type:"text/json"}),t=document.createElement("a");t.download="postwoman-collection.json",t.href=window.URL.createObjectURL(e),t.target="_blank",t.style.display="none",document.body.appendChild(t),t.click(),document.body.removeChild(t),this.$toast.success(this.$t("download_started"),{icon:"done"})},syncCollections:function(){this.$store.commit("postwoman/replaceCollections",r.a.currentCollections),this.fileImported()},syncToFBCollections:function(){null!==r.a.currentUser&&r.a.currentSettings[0].value&&r.a.writeCollections(JSON.parse(JSON.stringify(this.$store.state.postwoman.collections)))},fileImported:function(){this.$toast.info(this.$t("file_imported"),{icon:"folder_shared"})},failedImport:function(){this.$toast.error(this.$t("import_failed"),{icon:"error"})},parsePostmanCollection:function(e){var t,o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=o?[{name:"",folders:[],requests:[]}]:{name:"",requests:[]},r=l(e.item);try{for(r.s();!(t=r.n()).done;){var c=t.value;c.request?n[0]?(n[0].name=e.info?e.info.name:"",n[0].requests.push(this.parsePostmanRequest(c))):(n.name=e.name?e.name:"",n.requests.push(this.parsePostmanRequest(c))):c.item&&c.item[0]&&n[0].folders.push(this.parsePostmanCollection(c,!1))}}catch(e){r.e(e)}finally{r.f()}return n},parsePostmanRequest:function(e){var t=e.name,o=e.request,n={url:"",path:"",method:"",auth:"",httpUser:"",httpPassword:"",passwordFieldType:"password",bearerToken:"",headers:[],params:[],bodyParams:[],rawParams:"",rawInput:!1,contentType:"",requestType:"",name:""};n.name=t;var r=o.url.raw.match(/^(.+:\/\/[^\/]+|{[^\/]+})(\/[^\?]+|).*$/);r&&(n.url=r[1],n.path=r[2]?r[2]:""),n.method=o.method;var c=o.auth?o.auth:"",d=c?c.type:"";"basic"===d?(n.auth="Basic Auth",n.httpUser="username"===c.basic[0].key?c.basic[0].value:c.basic[1].value,n.httpPassword="password"===c.basic[0].key?c.basic[0].value:c.basic[1].value):"oauth2"===d?(n.auth="OAuth 2.0",n.bearerToken="accessToken"===c.oauth2[0].key?c.oauth2[0].value:c.oauth2[1].value):"bearer"===d&&(n.auth="Bearer Token",n.bearerToken=c.bearer[0].value);var m=o.header;if(m){n.headers=m;var f,h=l(n.headers);try{for(h.s();!(f=h.n()).done;){var header=f.value;delete header.name,delete header.type}}catch(e){h.e(e)}finally{h.f()}}var v=o.url.query;if(v){n.params=v;var y,_=l(n.params);try{for(_.s();!(y=_.n()).done;){delete y.value.disabled}}catch(e){_.e(e)}finally{_.f()}}if(o.body)if("urlencoded"===o.body.mode){var w=o.body.urlencoded;n.bodyParams=w||[];var C,$=l(n.bodyParams);try{for($.s();!(C=$.n()).done;){delete C.value.type}}catch(e){$.e(e)}finally{$.f()}}else"raw"===o.body.mode&&(n.rawInput=!0,n.rawParams=o.body.raw);return n}}},m=o(42),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.show?o("modal",{on:{close:e.hideModal}},[o("div",{attrs:{slot:"header"},slot:"header"},[o("ul",[o("li",[o("div",{staticClass:"flex-wrap"},[o("h3",{staticClass:"title"},[e._v(e._s(e.$t("import_export"))+" "+e._s(e.$t("collections")))]),e._v(" "),o("div",[o("button",{staticClass:"icon",on:{click:e.hideModal}},[o("i",{staticClass:"material-icons"},[e._v("close")])])])]),e._v(" "),o("div",{staticClass:"flex-wrap"},[o("span",{directives:[{name:"tooltip",rawName:"v-tooltip",value:{content:e.fb.currentUser?e.$t("replace_current"):e.$t("login_first")},expression:"{\n              content: !fb.currentUser ? $t('login_first') : $t('replace_current'),\n            }"}]},[o("button",{staticClass:"icon",attrs:{disabled:!e.fb.currentUser},on:{click:e.syncCollections}},[o("i",{staticClass:"material-icons"},[e._v("folder_shared")]),e._v(" "),o("span",[e._v(e._s(e.$t("import_from_sync")))])])]),e._v(" "),o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("replace_current"),expression:"$t('replace_current')"}],staticClass:"icon",on:{click:e.openDialogChooseFileToReplaceWith}},[o("i",{staticClass:"material-icons"},[e._v("create_new_folder")]),e._v(" "),o("span",[e._v(e._s(e.$t("replace_json")))]),e._v(" "),o("input",{ref:"inputChooseFileToReplaceWith",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/json"},on:{change:e.replaceWithJSON}})]),e._v(" "),o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("preserve_current"),expression:"$t('preserve_current')"}],staticClass:"icon",on:{click:e.openDialogChooseFileToImportFrom}},[o("i",{staticClass:"material-icons"},[e._v("folder_special")]),e._v(" "),o("span",[e._v(e._s(e.$t("import_json")))]),e._v(" "),o("input",{ref:"inputChooseFileToImportFrom",staticStyle:{display:"none"},attrs:{type:"file",accept:"application/json"},on:{change:e.importFromJSON}})])])])])]),e._v(" "),o("div",{attrs:{slot:"body"},slot:"body"},[o("textarea",{directives:[{name:"model",rawName:"v-model",value:e.collectionJson,expression:"collectionJson"}],attrs:{rows:"8"},domProps:{value:e.collectionJson},on:{input:function(t){t.target.composing||(e.collectionJson=t.target.value)}}})]),e._v(" "),o("div",{attrs:{slot:"footer"},slot:"footer"},[o("div",{staticClass:"flex-wrap"},[o("span"),e._v(" "),o("span",[o("button",{staticClass:"icon",on:{click:e.hideModal}},[e._v("\n          "+e._s(e.$t("cancel"))+"\n        ")]),e._v(" "),o("button",{directives:[{name:"tooltip",rawName:"v-tooltip",value:e.$t("download_file"),expression:"$t('download_file')"}],staticClass:"icon primary",on:{click:e.exportJSON}},[e._v("\n          "+e._s(e.$t("export"))+"\n        ")])])])])]):e._e()}),[],!1,null,null,null);t.default=component.exports}}]);